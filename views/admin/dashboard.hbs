<link rel="stylesheet" href="/stylesheets/dashboard.css">
<link rel="stylesheet" href="/stylesheets/test.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

<style>
  .dashboard {
    width: 100%;
    margin-top: 17px;
    letter-spacing: 2px;
    color: #ccc;
  }
</style>

<aside class="side-nav" id="show-side-navigation1">
  <i class="fa fa-bars close-aside hidden-sm hidden-md hidden-lg" data-close="show-side-navigation1"></i>
  <div class="heading">
    <img
      src="https://uniim1.shutterfly.com/ng/services/mediarender/THISLIFE/021036514417/media/23148907008/medium/1501685726/enhance"
      alt="">
    <div class="info">
      <h3><a href="#">Asharudheen</a></h3>
      <p>Admin</p>
    </div>
  </div>
  <div>
    <a id="dash" type="button" class="dashboard btn btn-outline-primary waves-effect">DashBoard</a>
    <button type="button" class="btn btn-success" id="dashb">submit</button>
    <input id="testin" value="" type="text">
  </div>
  <ul class="categories">
    <li><i class="fa fa-home fa-fw" aria-hidden="true"></i><a href="#"> User Managment</a>
      <ul class="side-nav-dropdown">
        <li><a href="/admin/view-users">View Users</a></li>
        <li><a href="/admin/add-users">Add User</a></li>
      </ul>
    </li>
    <li><i class="fa fa-home fa-fw" aria-hidden="true"></i><a href="#">Product Managment</a>
      <ul class="side-nav-dropdown">
        <li><a href="/admin/view-product">View Products</a></li>
        <li><a href="/admin/add-product">Add New Products</a></li>
      </ul>
    </li>
    <li><i class="fa fa-home fa-fw" aria-hidden="true"></i><a href="#">Order Managment</a>
      <ul class="side-nav-dropdown">
        <li><a href="/admin/order-details">View Orders</a></li>
        <li><a href="/admin/successorder">Success Orders</a></li>
        <li><a href="/admin/rejectorder">Canceled Orders</a></li>
        <li><a href="/admin/plsacedorder">Pending Orders</a></li>
      </ul>
    </li>
    <li><i class="fa fa-home fa-fw" aria-hidden="true"></i><a href="#">Category Managment</a>
      <ul class="side-nav-dropdown">
        <li><a href="/admin/category">Categories</a></li>
        <li><a href="/admin/addCategory">Add Category</a></li>
      </ul>
    </li>
    <li><i class="fa fa-home fa-fw" aria-hidden="true"></i><a href="#">Report</a>
      <ul class="side-nav-dropdown">
        <li><a href="/admin/salesreport">Sales Report</a></li>
      </ul>
    </li>
  </ul>
  <div style="text-align: right;">
    <a type="button" href="/admin/adminlogout" class="btn btn-danger">LogOut</a>
  </div>
</aside>

<div style="display: ; margin-left: 380px;">
  <h2>hhhhhhhhhhhhhhhhhhhhhhh</h2>
  {{#each response}}
  <input id="day" type="text" value={{data.day}}>
  <input id="total" type="text" value={{total}}>
  <input id="count" type="text" value={{count}}>
  {{/each}}
</div>

<section id="contents">

  <div class="welcome">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-12">
          <div class="content">
            <h2>Welcome to Dashboard</h2>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <section class="charts">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-6">
          <div class="chart-container">
            <h3>Chart</h3>
            <canvas id="myChart"></canvas>
          </div>
        </div>
        <div class="col-md-6">
          <div class="chart-container">
            <h3>Chart2</h3>
            <canvas id="myChart2"></canvas>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class='statis text-center'>
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-3">
          <div class="box bg-primary">
            <i class="fa fa-eye"></i>
            <h3>5,154</h3>
            <p class="lead">Page views</p>
          </div>
        </div>
        <div class="col-md-3">
          <div class="box danger">
            <i class="fa fa-user-o"></i>
            <h3>{{allUsers}}</h3>
            <p class="lead">User registered</p>
          </div>
        </div>
        <div class="col-md-3">
          <div class="box warning">
            <i class="fa fa-shopping-cart"></i>
            <h3>{{allOrders}}</h3>
            <p class="lead">Product sales</p>
          </div>
        </div>
        <div class="col-md-3">
          <div class="box success">
            <i class="fa fa-handshake-o"></i>
            <h3>{{allProducts}}</h3>
            <p class="lead">Transactions</p>
          </div>
        </div>
      </div>
    </div>
  </section>
  <section class="chrt3">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-9">
          <div class="chart-container">
            <canvas id="chart3" width="100%"></canvas>
          </div>
        </div>
        <div class="col-md-4">
          <div class="box">
          </div>
        </div>
      </div>
    </div>
  </section>
</section>


<script src="/javascripts/admin/dashboard.js"></script>
<script src="/javascripts/admin/report.js"></script>
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>


<script>

</script>


<script>
  $(function () {
    "use strict";

    var aside = $(".side-nav"),
      showAsideBtn = $(".show-side-btn"),
      contents = $("#contents"),
      _window = $(window);

    showAsideBtn.on("click", function () {
      $("#" + $(this).data("show")).toggleClass("show-side-nav");
      contents.toggleClass("margin");
    });

    if (_window.width() <= 767) {
      aside.addClass("show-side-nav");
    }

    _window.on("resize", function () {
      if ($(window).width() > 767) {
        aside.removeClass("show-side-nav");
      }
    });

    // dropdown menu in the side nav
    var slideNavDropdown = $(".side-nav-dropdown");

    $(".side-nav .categories li").on("click", function () {
      var $this = $(this);

      $this.toggleClass("opend").siblings().removeClass("opend");

      if ($this.hasClass("opend")) {
        $this.find(".side-nav-dropdown").slideToggle("fast");
        $this.siblings().find(".side-nav-dropdown").slideUp("fast");
      } else {
        $this.find(".side-nav-dropdown").slideUp("fast");
      }
    });

    $(".side-nav .close-aside").on("click", function () {
      $("#" + $(this).data("close")).addClass("show-side-nav");
      contents.removeClass("margin");
    });

    // Start chart
    var chart = document.getElementById("myChart");
    Chart.defaults.global.animation.duration = 2000; // Animation duration
    Chart.defaults.global.title.display = false; // Remove title
    Chart.defaults.global.title.text = "Chart"; // Title
    Chart.defaults.global.title.position = "bottom"; // Title position
    Chart.defaults.global.defaultFontColor = "#999"; // Font color
    Chart.defaults.global.defaultFontSize = 10; // Font size for every label

    // Chart.defaults.global.tooltips.backgroundColor = '#FFF'; // Tooltips background color
    Chart.defaults.global.tooltips.borderColor = "white"; // Tooltips border color
    Chart.defaults.global.legend.labels.padding = 0;
    Chart.defaults.scale.ticks.beginAtZero = true;
    Chart.defaults.scale.gridLines.zeroLineColor = "rgba(255, 255, 255, 0.1)";
    Chart.defaults.scale.gridLines.color = "rgba(255, 255, 255, 0.02)";
    Chart.defaults.global.legend.display = false;

    $("#dashb").click(() => {
      alert("okkkkkkkkkkkk")
      $.ajax({
        url: "/admin/dashboardData",
        method: "post",
        success: (response) => {
          $("#testin").val(response)
          console.log("vannumone", response)
          let responses = response
        }
      })
    })

    let day = $('#day').val()
    let total = $('#total').val()
    let count = $('#count').val()
    let responses = $("#testin").val()
    alert("hiiiii");
    let length = Object.keys(responses).length;

    for (let i = 0; i < length; i++) {
      var myChart = new Chart(chart, {
        type: "bar",
        data: {
          labels: [
            responses.data.day[i]
          ],
          datasets: [
            {
              label: "Lost",
              fill: false,
              lineTension: 0,
              data: [45, 25, 40, 20, 45, 20, 90],
              pointBorderColor: "#4bc0c0",
              borderColor: "#4bc0c0",
              borderWidth: 2,
              showLine: true,
            },
            {
              label: "Succes",
              fill: false,
              lineTension: 0,
              startAngle: 2,
              data: [20, 40, 20, 45, 25, 60, 90],
              // , '#ff6384', '#4bc0c0', '#ffcd56', '#457ba1'
              backgroundColor: "transparent",
              pointBorderColor: "#ff6384",
              borderColor: "#ff6384",
              borderWidth: 2,
              showLine: true,
            },
          ],
        },
      });
    }

    //  Chart ( 2 )
    var Chart2 = document.getElementById("myChart2").getContext("2d");
    var chart = new Chart(Chart2, {
      type: "line",
      data: {
        labels: [
          "January",
          "February",
          "March",
          "April",
          "test",
          "test",
          "test",
          "test",
        ],
        datasets: [
          {
            label: "My First dataset",
            backgroundColor: "rgb(255, 99, 132)",
            borderColor: "rgb(255, 79, 116)",
            borderWidth: 2,
            pointBorderColor: false,
            data: [5, 10, 5, 8, 20, 30, 20, 10],
            fill: false,
            lineTension: 0.4,
          },
          {
            label: "Month",
            fill: false,
            lineTension: 0.4,
            startAngle: 2,
            data: [20, 14, 20, 25, 10, 15, 25, 10],
            // , '#ff6384', '#4bc0c0', '#ffcd56', '#457ba1'
            backgroundColor: "transparent",
            pointBorderColor: "#4bc0c0",
            borderColor: "#4bc0c0",
            borderWidth: 2,
            showLine: true,
          },
          {
            label: "Month",
            fill: false,
            lineTension: 0.4,
            startAngle: 2,
            data: [40, 20, 5, 10, 30, 15, 15, 10],
            // , '#ff6384', '#4bc0c0', '#ffcd56', '#457ba1'
            backgroundColor: "transparent",
            pointBorderColor: "#ffcd56",
            borderColor: "#ffcd56",
            borderWidth: 2,
            showLine: true,
          },
        ],
      },

      // Configuration options
      options: {
        title: {
          display: false,
        },
      },
    });

    var chart = document.getElementById("chart3");
    var myChart = new Chart(chart, {
      type: "line",
      data: {
        labels: ["One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight"],
        datasets: [
          {
            label: "Lost",
            fill: false,
            lineTension: 0.5,
            pointBorderColor: "transparent",
            pointColor: "white",
            borderColor: "#d9534f",
            borderWidth: 0,
            showLine: true,
            data: [0, 40, 10, 30, 10, 20, 15, 20],
            pointBackgroundColor: "transparent",
          },
          {
            label: "Lost",
            fill: false,
            lineTension: 0.5,
            pointColor: "white",
            borderColor: "#5cb85c",
            borderWidth: 0,
            showLine: true,
            data: [40, 0, 20, 10, 25, 15, 30, 0],
            pointBackgroundColor: "transparent",
          },
          {
            label: "Lost",
            fill: false,
            lineTension: 0.5,
            pointColor: "white",
            borderColor: "#f0ad4e",
            borderWidth: 0,
            showLine: true,
            data: [10, 40, 20, 5, 35, 15, 35, 0],
            pointBackgroundColor: "transparent",
          },
          {
            label: "Lost",
            fill: false,
            lineTension: 0.5,
            pointColor: "white",
            borderColor: "#337ab7",
            borderWidth: 0,
            showLine: true,
            data: [0, 30, 10, 25, 10, 40, 20, 0],
            pointBackgroundColor: "transparent",
          },
        ],
      },
    });
  });
</script>